<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>äºˆç´„ç¢ºèª</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body class="p-6 bg-gray-50 text-gray-800">
  <div class="max-w-md mx-auto bg-white rounded-2xl shadow-lg p-6 text-center">
    <h2 class="text-xl font-bold mb-4">ğŸ‰ ã”äºˆç´„ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ï¼</h2>

    <div id="reservationDetails" class="text-left space-y-3"></div>

    <button id="closeBtn" class="mt-6 bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-lg">
      LINEã«æˆ»ã‚‹
    </button>
  </div>

  <script>
    // ğŸ“¦ URLãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’å–å¾—
    const params = new URLSearchParams(window.location.search);

    const name = params.get("name") || "";
    const phone = params.get("phone") || "";
    const store = params.get("store") || "";
    const pickupDate = params.get("pickupDate") || "";
    const pickupTime = params.get("pickupTime") || "";
    const products = params.get("products") || "";
    const total = params.get("total") || "";
    const memo = params.get("memo") || "";

    // ğŸ—“ æ—¥ä»˜ã‚’ã€Œã€‡å¹´ã€‡æœˆã€‡æ—¥ï¼ˆæ›œï¼‰ã€ã«å¤‰æ›
    function formatJapaneseDate(isoDate) {
      if (!isoDate) return "";
      const date = new Date(isoDate + "T00:00:00");
      const days = ["æ—¥", "æœˆ", "ç«", "æ°´", "æœ¨", "é‡‘", "åœŸ"];
      const y = date.getFullYear();
      const m = date.getMonth() + 1;
      const d = date.getDate();
      const w = days[date.getDay()];
      return `${y}å¹´${m}æœˆ${d}æ—¥ï¼ˆ${w}ï¼‰`;
    }

    // â° æ™‚é–“ã‚’ã€Œã€‡æ™‚ã€‡åˆ†ã€ã«å¤‰æ›
    function formatJapaneseTime(time) {
      if (!time) return "";
      const [h, m] = time.split(":");
      return `${parseInt(h)}æ™‚${m}åˆ†`;
    }

    // ğŸ§¾ HTMLã«åæ˜ 
    document.getElementById("reservationDetails").innerHTML = `
      <p><strong>ãŠåå‰ï¼š</strong>${name}</p>
      <p><strong>é›»è©±ç•ªå·ï¼š</strong>${phone}</p>
      <p><strong>å—å–åº—èˆ—ï¼š</strong>${store}</p>
      <p><strong>å—å–æ—¥æ™‚ï¼š</strong>${formatJapaneseDate(pickupDate)} ${formatJapaneseTime(pickupTime)}</p>
      <p><strong>ã”æ³¨æ–‡å†…å®¹ï¼š</strong><br>${products.replace(/\n/g, "<br>")}</p>
      <p><strong>åˆè¨ˆé‡‘é¡ï¼š</strong>${total}å††</p>
      ${memo ? `<p><strong>å‚™è€ƒï¼š</strong>${memo}</p>` : ""}
    `;

    // âœ… LINEã‚¢ãƒ—ãƒªã¸æˆ»ã‚‹
    document.getElementById("closeBtn").addEventListener("click", () => {
      if (typeof liff !== "undefined" && liff.isInClient()) {
        liff.closeWindow();
      } else {
        window.location.href = "https://line.me/";
      }
    });
  </script>
</body>
</html>
